<div id="wrapper" 
    (window:resize)="onResize()" 
    class="">
    <section id="first-section" class="screen-height-section flex w-full relative overflow-hidden">
        <div class="flex flex-col ml-[var(--title-margin)] mt-[max(calc(var(--title-margin)-56px),40px)] justify-start z-10">
            <h1 class="scroll-hidden">Lighthouse <br> DMS</h1>
            <h2 class="scroll-hidden !delay-100">Electronic document management <br> system</h2>
            <a href="https://github.com/te5se/portfolio/tree/develop/ProjectDescriptions/DMS" class="local-button mt-8 mr-auto">see the details</a>
        </div>
        <app-reports class="absolute -left-[254px] md:left-[unset]  md:right-[56px] bottom-[240px] md:bottom-[40px] 
            w-[min(250vw,700px)] md:w-[unset]
            scale-75 md:scale-100 lg:scale-125 origin-bottom-right"></app-reports>

    </section>
    <section id="second-section" class="flex flex-col screen-height-section relative">
        <div id="lighthouse" [style.background-image]="'url(' + baseHref + 'assets/Lighthouse.png)'"></div>
        <h1 class="flex scroll-hidden ml-[var(--title-margin)] mt-24">Tailored routing

        </h1>
        <h2 class=" ml-[var(--title-margin)]" [innerHTML]="customizableRouting.status | async"></h2>
        <div *ngIf="isEditingRoute == false" class="ml-[var(--title-margin)]  flex gap-4 justify-start mt-8">
            <button [disabled]="isRoutingInProgress" (click)="runDocument()" 
                class="local-button min-w-[150px]">
                {{runDocumentCaption}}
            </button>
            <button (click)="isEditingRoute = true"  [disabled]="isRoutingInProgress" 
                class=" local-button">
                change route
            </button>
        </div>
        <div *ngIf="isEditingRoute" class="ml-[var(--title-margin)] flex-wrap flex gap-4 justify-start mt-8">
            <p class="my-auto text-lg">number of coordinators</p>
            <button 
                (click)="removeCoordinator()"
                class="local-button">
                -
            </button>
            <P class="my-auto  text-lg">{{numberOfCoordinators}}</P>
            <button 
                (click)="addCoordinator()"
                class="local-button">
                +
            </button>

            <div class="w-[1px] h-full bg-black mx-8 hidden md:block"></div>

            <button
                (click)="isTaskSectionActive = !isTaskSectionActive"
                class="flex flex-row gap-2 local-button">
                
                {{isTaskSectionActive ? 'don\'t track task completion' : 'track task completion'}}
            </button>

            <div
                class="w-[1px] h-full bg-black mx-8 hidden md:block"></div>

            <button 
                class="flex flex-row gap-2 local-button"
                (click)="isEditingRoute = false">
                <i class="material-symbols-outlined">save</i>
                save
            </button>   
        </div>

        <app-customizable-routing 
            id="customizable-routing"
            [trackTaskProgress]="isTaskSectionActive"
            [numberOfCoordinators]="numberOfCoordinators" #customizableRouting (isInProgress)="this.isRoutingInProgress = $event"
            class="w-full h-full overflow-x-auto z-10 mt-8 md:mt-0">

        </app-customizable-routing>
    </section>
    <section id="third-section" class="h-[2000px] mt-[30vh] relative pt-[50vh]">
        <div class="sticky top-[40vh] mx-auto flex flex-col">
            <h1 class="mx-auto">MILLIONS</h1>
            <h2 class="mx-auto">of documents</h2>
        </div>

        <div *ngFor="let wrapper of parallaxWrappers" [style.--parallax-speed]="wrapper.parallaxSpeed"
            [style.--parallax-margin-bottom]="wrapper.bottomMarginPX + 'px'"
            [style.padding-left]="wrapper.leftPercent + '%'"
            class="test-parallax pb-[var(--parallax-margin-bottom)] -z-10 absolute bottom-0 top-0 left-0 right-0 flex justify-end flex-col overflow-hidden">
            <app-parallax-document [style.scale]="wrapper.scale" [item]="wrapper.parallaxItem" class="w-fit">
            </app-parallax-document>
        </div>

    </section>
    <section id="last-section" class="flex flex-col screen-height-section relative mt-[50vh]">
        <h1 class="ml-[var(--title-margin)] md:mx-auto mt-40">Over 1000 concurrent users</h1>

        <app-active-users class="h-1/2 w-full mt-24"></app-active-users>
    </section>
</div>